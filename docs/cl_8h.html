<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Number Theory Utils: include/nut/cl.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_awesome_sidebar.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="/Number-Theory-Utils/index.html">Number Theory Utils</a><span id="projectnumber">&#160;0.2.0</span>
   </div>
  </td>
 </tr>
   <!--BEGIN FULL_SIDEBAR-->
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
   <!--END FULL_SIDEBAR-->
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cl_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cl.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>hacatu </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.2.0 </dd></dl>
<h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p>This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>. </p>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>Common OpenCL wrapper functions, used by all programs that want to use OpenCL implementations of any algorithm supported by Number Theory Utils </p>

<p class="definition">Definition in file <a class="el" href="cl_8h_source.html">cl.h</a>.</p>
</div>
<p><a href="cl_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manages "global" OpenCL state including programs, kernels, the context, and the command queue.  <a href="structnut__ClMgr.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5990dea19d4ccb046a3d81b311457add"><td class="memItemLeft" align="right" valign="top"><a id="a5990dea19d4ccb046a3d81b311457add"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CL_TARGET_OPENCL_VERSION</b>&#160;&#160;&#160;220</td></tr>
<tr class="separator:a5990dea19d4ccb046a3d81b311457add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649be233b3a28fad793418502085dc8e"><td class="memItemLeft" align="right" valign="top"><a id="a649be233b3a28fad793418502085dc8e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a649be233b3a28fad793418502085dc8e">NUT_CL_FLAG_DIE</a>&#160;&#160;&#160;0x1</td></tr>
<tr class="memdesc:a649be233b3a28fad793418502085dc8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set on <a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> to cause <a class="el" href="cl_8h.html#a8677634e45c37bcec7cf3b78ed3c5cdf">nut_cl_check_err</a> and other functions to terminate the program if an error is encountered. <br /></td></tr>
<tr class="separator:a649be233b3a28fad793418502085dc8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02f23cf2b6183ccc98dd87ac6bad565"><td class="memItemLeft" align="right" valign="top"><a id="ae02f23cf2b6183ccc98dd87ac6bad565"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#ae02f23cf2b6183ccc98dd87ac6bad565">NUT_CL_FLAG_VERBOSE</a>&#160;&#160;&#160;0x2</td></tr>
<tr class="memdesc:ae02f23cf2b6183ccc98dd87ac6bad565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set on <a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> to cause <a class="el" href="cl_8h.html#a8677634e45c37bcec7cf3b78ed3c5cdf">nut_cl_check_err</a> and other functions to display more information on stderr. <br /></td></tr>
<tr class="separator:ae02f23cf2b6183ccc98dd87ac6bad565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3f0b8f021b3e363706c030a722ad2a"><td class="memItemLeft" align="right" valign="top"><a id="abc3f0b8f021b3e363706c030a722ad2a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#abc3f0b8f021b3e363706c030a722ad2a">NUT_CL_FLAG_MT_SAFE</a>&#160;&#160;&#160;0x4</td></tr>
<tr class="memdesc:abc3f0b8f021b3e363706c030a722ad2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set on <a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> to cause functions, especially the error reporting callback passed to clCreateContext, to access stdio under a lock. <br /></td></tr>
<tr class="separator:abc3f0b8f021b3e363706c030a722ad2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8677634e45c37bcec7cf3b78ed3c5cdf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a8677634e45c37bcec7cf3b78ed3c5cdf">nut_cl_check_err</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr, const char *title, const char *subtitle)</td></tr>
<tr class="memdesc:a8677634e45c37bcec7cf3b78ed3c5cdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check and report/resolve OpenCL errors after manually calling OpenCL functions Will print errors and/or terminate the program if there are errors, based on the flags set in mgr.  <a href="cl_8h.html#a8677634e45c37bcec7cf3b78ed3c5cdf">More...</a><br /></td></tr>
<tr class="separator:a8677634e45c37bcec7cf3b78ed3c5cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963698ef91fd18c9f58a4d099f23c6b5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a963698ef91fd18c9f58a4d099f23c6b5">nut_cl_setup</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr, int flags)</td></tr>
<tr class="memdesc:a963698ef91fd18c9f58a4d099f23c6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize OpenCL and store the relevant state in mgr The first available platform and device will be chosen, this might not be right for systems with multiple gpus The settings in flags will be passed on to mgr and govern how errors will be handled during this function call, but mgr-&gt;flags can be changed afterwards (eg you can set/unset verbose/die to help clear up clutter and avoid handling unresolvable errors).  <a href="cl_8h.html#a963698ef91fd18c9f58a4d099f23c6b5">More...</a><br /></td></tr>
<tr class="separator:a963698ef91fd18c9f58a4d099f23c6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80371870cd45702faa15bf0d2de7aa8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a80371870cd45702faa15bf0d2de7aa8f">nut_cl_close</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr)</td></tr>
<tr class="memdesc:a80371870cd45702faa15bf0d2de7aa8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shut down OpenCL and clean up all resources associated with mgr This cleans up all programs, kernels, and other opencl objects associated with mgr and then shuts down the context and command queue.  <a href="cl_8h.html#a80371870cd45702faa15bf0d2de7aa8f">More...</a><br /></td></tr>
<tr class="separator:a80371870cd45702faa15bf0d2de7aa8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a32f57182812d9adfb66da07612536"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a73a32f57182812d9adfb66da07612536">nut_cl_read_source</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr, const char *filename)</td></tr>
<tr class="memdesc:a73a32f57182812d9adfb66da07612536"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an OpenCL source file (.cl) into a string The returned string is malloc'd and should be free'd after it is used (once it has been passed to <a class="el" href="cl_8h.html#a2d57a72d019816c9165fa992bd3f2a98">nut_cl_make_program_from_source</a>).  <a href="cl_8h.html#a73a32f57182812d9adfb66da07612536">More...</a><br /></td></tr>
<tr class="separator:a73a32f57182812d9adfb66da07612536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d57a72d019816c9165fa992bd3f2a98"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a2d57a72d019816c9165fa992bd3f2a98">nut_cl_make_program_from_source</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr, const char *source)</td></tr>
<tr class="memdesc:a2d57a72d019816c9165fa992bd3f2a98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compile OpenCL source read into an OpenCL program The source should come from <a class="el" href="cl_8h.html#a73a32f57182812d9adfb66da07612536">nut_cl_read_source</a>.  <a href="cl_8h.html#a2d57a72d019816c9165fa992bd3f2a98">More...</a><br /></td></tr>
<tr class="separator:a2d57a72d019816c9165fa992bd3f2a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1be98afb4f7443c6d8acd9fecc7b8f61"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#a1be98afb4f7443c6d8acd9fecc7b8f61">nut_cl_create_kernel</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr, size_t program_idx, const char *name)</td></tr>
<tr class="memdesc:a1be98afb4f7443c6d8acd9fecc7b8f61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create one kernel with a given name program_idx should be the index of the program in mgr.  <a href="cl_8h.html#a1be98afb4f7443c6d8acd9fecc7b8f61">More...</a><br /></td></tr>
<tr class="separator:a1be98afb4f7443c6d8acd9fecc7b8f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75f1fc0811a8ee4158d4edf519c5ac0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl_8h.html#ad75f1fc0811a8ee4158d4edf519c5ac0">nut_cl_create_all_kernels</a> (<a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *mgr, size_t program_idx)</td></tr>
<tr class="memdesc:ad75f1fc0811a8ee4158d4edf519c5ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create all kernels within a given program Automatically extracts kernel names from the program and gets references to all of them.  <a href="cl_8h.html#ad75f1fc0811a8ee4158d4edf519c5ac0">More...</a><br /></td></tr>
<tr class="separator:ad75f1fc0811a8ee4158d4edf519c5ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8677634e45c37bcec7cf3b78ed3c5cdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8677634e45c37bcec7cf3b78ed3c5cdf">&#9670;&nbsp;</a></span>nut_cl_check_err()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nut_cl_check_err </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subtitle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check and report/resolve OpenCL errors after manually calling OpenCL functions Will print errors and/or terminate the program if there are errors, based on the flags set in mgr. </p>
<p>Wrapper functions already do this, so only call this function after manually calling OpenCL functions. In this case, ensure that mgr-&gt;err gets set to the OpenCL error from the function, ie by doing <code>mgr-&gt;err = clErrRetFn(...)</code> or <code>clErrOutArgFn(&amp;mgr-&gt;err)</code> as appropriate. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mgr</td><td>mgr-&gt;flags influences whether or not this function will print, lock stdio, and/or kill the program on errors </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">title</td><td>printed before the description of the error if printing occurs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">subtitle</td><td>printed after the description of the error if printing occurs </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if mgr-&gt;err == CL_SUCCESS, false otherwise (unless mgr-&gt;flags has NUT_CL_FLAG_DIE set, in which case the program terminates so this function never returns) </dd></dl>

</div>
</div>
<a id="a963698ef91fd18c9f58a4d099f23c6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963698ef91fd18c9f58a4d099f23c6b5">&#9670;&nbsp;</a></span>nut_cl_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nut_cl_setup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize OpenCL and store the relevant state in mgr The first available platform and device will be chosen, this might not be right for systems with multiple gpus The settings in flags will be passed on to mgr and govern how errors will be handled during this function call, but mgr-&gt;flags can be changed afterwards (eg you can set/unset verbose/die to help clear up clutter and avoid handling unresolvable errors). </p>
<p>However, mt_safe should not be changed, as this changes the state expected of the log lock. </p><dl class="section return"><dt>Returns</dt><dd>true on success, false on failure (unless flags has die set, in which case the program terminates) </dd></dl>

</div>
</div>
<a id="a80371870cd45702faa15bf0d2de7aa8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80371870cd45702faa15bf0d2de7aa8f">&#9670;&nbsp;</a></span>nut_cl_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nut_cl_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shut down OpenCL and clean up all resources associated with mgr This cleans up all programs, kernels, and other opencl objects associated with mgr and then shuts down the context and command queue. </p>
<p>However, OpenCL still has a lot of "still reachable" memory leaks and a couple other spurious issues under valgrind/msan, so not only is it not necessary to call this as long as you don't leak mgr or need the memory back before the program ends, opencl will actually leave some memory still allocated even after this function is called. </p>

</div>
</div>
<a id="a73a32f57182812d9adfb66da07612536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a32f57182812d9adfb66da07612536">&#9670;&nbsp;</a></span>nut_cl_read_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* nut_cl_read_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an OpenCL source file (.cl) into a string The returned string is malloc'd and should be free'd after it is used (once it has been passed to <a class="el" href="cl_8h.html#a2d57a72d019816c9165fa992bd3f2a98">nut_cl_make_program_from_source</a>). </p>
<p>Currently, no fancy searching is done and filename is simply resolved as a path relative to the current working directory (ie a relative path can be used or an absolute path to enhance relocatability) </p>

</div>
</div>
<a id="a2d57a72d019816c9165fa992bd3f2a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d57a72d019816c9165fa992bd3f2a98">&#9670;&nbsp;</a></span>nut_cl_make_program_from_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nut_cl_make_program_from_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compile OpenCL source read into an OpenCL program The source should come from <a class="el" href="cl_8h.html#a73a32f57182812d9adfb66da07612536">nut_cl_read_source</a>. </p>
<p>To determine the program, note mgr-&gt;programs_len before this call; if p is its value before calling this function, on success mgr-&gt;programs[p] will hold the compiled program. mgr-&gt;programs is subject to reallocation, so do not store pointers to its elements; rather store copies of them (<code>cl_program</code> is a typedef of a pointer so this is ok) or their indicies. Besides <a class="el" href="">source </a>, the source code could also be embedded as a string within the program code or stored any other way you see fit. Unfortunately, loading programs from spirv IL is not currently supported, it seems there are severe limitations to compiling OpenCL programs to this form as any kernels that use 64 bit integer arithmetic will fail to translate from llvm bytecode to spriv IL </p>

</div>
</div>
<a id="a1be98afb4f7443c6d8acd9fecc7b8f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1be98afb4f7443c6d8acd9fecc7b8f61">&#9670;&nbsp;</a></span>nut_cl_create_kernel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nut_cl_create_kernel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>program_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create one kernel with a given name program_idx should be the index of the program in mgr. </p>
<p>This will be 0 for the first program created with <a class="el" href="cl_8h.html#a2d57a72d019816c9165fa992bd3f2a98">nut_cl_make_program_from_source</a>, 1 for the second, and so on. All kernels from all programs are currently stored in one array, mgr-&gt;kernels. To find where the kernel will show up, take note of mgr-&gt;num_kernels before calling this function. mgr-&gt;kernels is subject to reallocation, so do not store pointers to its elements; rather store copies of them (<code>cl_kernel</code> is a typedef of a pointer so this is ok) or their indicies. </p>

</div>
</div>
<a id="ad75f1fc0811a8ee4158d4edf519c5ac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75f1fc0811a8ee4158d4edf519c5ac0">&#9670;&nbsp;</a></span>nut_cl_create_all_kernels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nut_cl_create_all_kernels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnut__ClMgr.html">nut_ClMgr</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>program_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create all kernels within a given program Automatically extracts kernel names from the program and gets references to all of them. </p>
<p>If mgr-&gt;num_kernels equals p before calling this, on success it increases by n the number of kernels, and the kernels are stored at <code>mgr-&gt;kernels[p]</code> through <code>mgr-&gt;kernels[p + n - 1]</code> inclusive. The kernels should be created in the order they appear in the source, but this might not be guaranteed by <code>clGetProgramInfo</code>. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_073faa820624379b5730e5b4f5cb1c42.html">nut</a></li><li class="navelem"><a class="el" href="cl_8h.html">cl.h</a></li>
    <li class="footer">Generated on Tue Jan 30 2024 01:27:08 for Number Theory Utils by <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
